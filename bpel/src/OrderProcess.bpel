<?xml version="1.0" encoding="UTF-8"?>
<process
    name="OrderProcess"
    targetNamespace="http://enterprise.netbeans.org/bpel/BpelModule1/OrderProcess"
    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:sxt="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Trace" 
    xmlns:sxed="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Editor"
    xmlns:tns="http://enterprise.netbeans.org/bpel/BpelModule1/OrderProcess"
    xmlns:cmw="http://infosys.tuwien.ac.at/aic10/dto/custommanagerwrapper"
    xmlns:shi="http://infosys.tuwien.ac.at/aic10/dto/shipping"
    xmlns:whs="http://infosys.tuwien.ac.at/aic10/dto/warehouse"
    xmlns:sup="http://infosys.tuwien.ac.at/aic10/dto/supplier"
    xmlns:plnk="http://docs.oasis-open.org/wsbpel/2.0/plnktype">
    <import namespace="http://infosys.tuwien.ac.at/aic10/ass2/process" location="OrderProcess.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://infosys.tuwien.ac.at/aic10/dto/custommanagerwrapper" location="CustomerManagementServiceWrapper.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://infosys.tuwien.ac.at/aic10/dto/shipping" location="Shipping.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://infosys.tuwien.ac.at/aic10/dto/warehouse" location="Warehouse.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://infosys.tuwien.ac.at/aic10/dto/supplier" location="Supplier2.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <plnk:partnerLinkType name="CustomerManagementLinkType">
        <plnk:role name="CustomerManagementProvider" portType="aic:CustomerManagerServiceWrapperPT"/>
    </plnk:partnerLinkType>
    <import namespace="http://enterprise.netbeans.org/bpel/CustomerManagementServiceWrapperWrapper" location="CustomerManagementServiceWrapperWrapper.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://enterprise.netbeans.org/bpel/ShippingWrapper" location="ShippingWrapper.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://enterprise.netbeans.org/bpel/WarehouseWrapper" location="WarehouseWrapper.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://enterprise.netbeans.org/bpel/Supplier2Wrapper" location="Supplier2Wrapper.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <partnerLinks>
        <partnerLink name="OrderProcess" xmlns:tns="http://infosys.tuwien.ac.at/aic10/ass2/process" partnerLinkType="tns:OrderProcessLinkType" myRole="OrderProcessProvider"/>
        <partnerLink name="Supplier2Service" xmlns:tns="http://enterprise.netbeans.org/bpel/Supplier2Wrapper" partnerLinkType="tns:SupplierLinkType" partnerRole="SupplierRole"/>
        <partnerLink name="WarehouseService" xmlns:tns="http://enterprise.netbeans.org/bpel/WarehouseWrapper" partnerLinkType="tns:WarehouseLinkType" partnerRole="WarehouseRole"/>
        <partnerLink name="ShippingService" xmlns:tns="http://enterprise.netbeans.org/bpel/ShippingWrapper" partnerLinkType="tns:ShippingLinkType" partnerRole="ShippingRole"/>
        <partnerLink name="CustomerManagementServiceWrapper" xmlns:tns="http://enterprise.netbeans.org/bpel/CustomerManagementServiceWrapperWrapper" partnerLinkType="tns:CustomManagerWrapperLinkType" partnerRole="CustomManagerWrapperRole"/>
    </partnerLinks>
    <sequence>
        <receive name="Receive1" createInstance="yes" partnerLink="OrderProcess" operation="start_process" xmlns:tns="http://infosys.tuwien.ac.at/aic10/ass2/process" portType="tns:OrderProcessPortType"/>
        <invoke name="Invoke2" partnerLink="CustomerManagementServiceWrapper" operation="get" portType="cmw:CustomManagerWrapper"/>
        <invoke name="Invoke3" partnerLink="WarehouseService" operation="check_availability" portType="whs:Warehouse"/>
        <invoke name="Invoke4" partnerLink="WarehouseService" operation="order" portType="whs:Warehouse"/>
        <flow name="Flow1">
            <invoke name="Invoke5" partnerLink="ShippingService" operation="ship_items" portType="shi:Shipping"/>
            <invoke name="Invoke6" partnerLink="CustomerManagementServiceWrapper" operation="update_account" portType="cmw:CustomManagerWrapper"/>
            <invoke name="Invoke7" partnerLink="CustomerManagementServiceWrapper" operation="notify" portType="cmw:CustomManagerWrapper"/>
        </flow>
        <invoke name="Invoke1" partnerLink="OrderProcess" operation="callback" xmlns:tns="http://infosys.tuwien.ac.at/aic10/ass2/process" portType="tns:OrderProcessPortType"/>
    </sequence>
</process>



